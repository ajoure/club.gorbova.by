
# –ü–ª–∞–Ω: –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–æ–∑–¥–∞–≤–∞—Ç—å —É—Ä–æ–∫–∏ –±–µ–∑ —è–≤–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è –º–æ–¥—É–ª—è

## –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å

–î–æ–±–∞–≤–∏—Ç—å –≤ –º–∞—Å—Ç–µ—Ä —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤—ã–±–æ—Ä–∞: —Å–æ–∑–¥–∞—Ç—å **–º–æ–¥—É–ª—å —Å —É—Ä–æ–∫–∞–º–∏** –∏–ª–∏ **—Ç–æ–ª—å–∫–æ —É—Ä–æ–∫** (–∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ –≤ —Å–µ–∫—Ü–∏–∏, –∫–∞–∫ "–í—ã–ø—É—Å–∫ #42" –Ω–∞ —Å–∫—Ä–∏–Ω—à–æ—Ç–µ).

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ

–ü–æ—Å–∫–æ–ª—å–∫—É –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö —É—Ä–æ–∫ (`training_lessons`) **–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ** –¥–æ–ª–∂–µ–Ω –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—Ç—å –º–æ–¥—É–ª—é (`module_id` ‚Äî required), –º—ã —Å–æ–∑–¥–∞–¥–∏–º –∫–æ–Ω—Ü–µ–ø—Ü–∏—é **—Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –º–æ–¥—É–ª—è-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞** –¥–ª—è –∫–∞–∂–¥–æ–π —Å–µ–∫—Ü–∏–∏:

- –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ "—Ç–æ–ª—å–∫–æ —É—Ä–æ–∫–∞" —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–π–¥—ë—Ç –∏–ª–∏ —Å–æ–∑–¥–∞—Å—Ç —Å–∫—Ä—ã—Ç—ã–π –º–æ–¥—É–ª—å –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–π —Å–µ–∫—Ü–∏–∏
- –≠—Ç–æ—Ç –º–æ–¥—É–ª—å –±—É–¥–µ—Ç –∏–º–µ—Ç—å —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —Ñ–ª–∞–≥ `is_container = true` (–∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `display_layout: "standalone-lessons"`)
- –£—Ä–æ–∫–∏ –≤–Ω—É—Ç—Ä–∏ —Ç–∞–∫–æ–≥–æ –º–æ–¥—É–ª—è –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ (–∫–∞–∫ –Ω–∞ —Å–∫—Ä–∏–Ω—à–æ—Ç–µ —Å –≤—ã–ø—É—Å–∫–∞–º–∏)

## –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –º–∞—Å—Ç–µ—Ä–µ

### –®–∞–≥ 0: –í—ã–±–æ—Ä —Ä–∞–∑–¥–µ–ª–∞ (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)

### –ù–æ–≤—ã–π –®–∞–≥ 1: –í—ã–±–æ—Ä —Ç–∏–ø–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  –ß—Ç–æ –≤—ã —Ö–æ—Ç–∏—Ç–µ —Å–æ–∑–¥–∞—Ç—å?                                     ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê          ‚îÇ
‚îÇ  ‚îÇ  üìÅ –ú–æ–¥—É–ª—å          ‚îÇ  ‚îÇ  üé¨ –£—Ä–æ–∫            ‚îÇ          ‚îÇ
‚îÇ  ‚îÇ                     ‚îÇ  ‚îÇ                     ‚îÇ          ‚îÇ
‚îÇ  ‚îÇ  –ü–∞–ø–∫–∞ —Å —É—Ä–æ–∫–∞–º–∏    ‚îÇ  ‚îÇ  –û—Ç–¥–µ–ª—å–Ω—ã–π —É—Ä–æ–∫     ‚îÇ          ‚îÇ
‚îÇ  ‚îÇ  –≤–Ω—É—Ç—Ä–∏             ‚îÇ  ‚îÇ  (–≤–∏–¥–µ–æ–æ—Ç–≤–µ—Ç, –≤—ã–ø—É—Å–∫)‚îÇ          ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò          ‚îÇ
‚îÇ                                                             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ï—Å–ª–∏ –≤—ã–±—Ä–∞–Ω "–ú–æ–¥—É–ª—å" ‚Äî —Ç–µ–∫—É—â–∏–π flow (—à–∞–≥–∏ 2-5)

### –ï—Å–ª–∏ –≤—ã–±—Ä–∞–Ω "–£—Ä–æ–∫" ‚Äî —É–ø—Ä–æ—â—ë–Ω–Ω—ã–π flow:

- **–®–∞–≥ 2**: –§–æ—Ä–º–∞ —É—Ä–æ–∫–∞ (–Ω–∞–∑–≤–∞–Ω–∏–µ, slug, –æ–ø–∏—Å–∞–Ω–∏–µ)
- **–®–∞–≥ 3**: –î–æ—Å—Ç—É–ø (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- **–®–∞–≥ 4**: –ì–æ—Ç–æ–≤–æ

–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —É—Ä–æ–∫–∞:
1. –ù–∞–π—Ç–∏ –∏–ª–∏ —Å–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä-–º–æ–¥—É–ª—å –¥–ª—è —Å–µ–∫—Ü–∏–∏ `menu_section_key`
2. –°–æ–∑–¥–∞—Ç—å —É—Ä–æ–∫ –≤ —ç—Ç–æ–º –º–æ–¥—É–ª–µ
3. –ü–µ—Ä–µ–π—Ç–∏ –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä –±–ª–æ–∫–æ–≤

## –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ë–î

–î–æ–±–∞–≤–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é:

```sql
ALTER TABLE training_modules 
ADD COLUMN is_container BOOLEAN DEFAULT false;
```

–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä-–º–æ–¥—É–ª—å:
- `is_container = true` ‚Äî —Å–∏—Å—Ç–µ–º–Ω—ã–π –º–æ–¥—É–ª—å –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö —É—Ä–æ–∫–æ–≤
- `is_active = true` ‚Äî –Ω–æ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–∞–∫ –∫–∞—Ä—Ç–æ—á–∫–∞ –º–æ–¥—É–ª—è
- –£—Ä–æ–∫–∏ –∏–∑ —Ç–∞–∫–æ–≥–æ –º–æ–¥—É–ª—è –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é –≤ —Å–µ–∫—Ü–∏–∏

## –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–∏

### Knowledge.tsx / Library.tsx

–õ–æ–≥–∏–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è:
1. –ï—Å–ª–∏ –º–æ–¥—É–ª—å `is_container = false` ‚Üí –ø–æ–∫–∞–∑–∞—Ç—å –∫–∞–∫ –∫–∞—Ä—Ç–æ—á–∫—É –º–æ–¥—É–ª—è (–∫–∞–∫ —Å–µ–π—á–∞—Å)
2. –ï—Å–ª–∏ –º–æ–¥—É–ª—å `is_container = true` ‚Üí –ø–æ–∫–∞–∑–∞—Ç—å —É—Ä–æ–∫–∏ –Ω–∞–ø—Ä—è–º—É—é –∫–∞–∫ –∫–∞—Ä—Ç–æ—á–∫–∏

## –§–∞–π–ª—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è

| –§–∞–π–ª | –ò–∑–º–µ–Ω–µ–Ω–∏—è |
|------|-----------|
| `src/components/admin/trainings/ContentCreationWizard.tsx` | –î–æ–±–∞–≤–∏—Ç—å –≤—ã–±–æ—Ä —Ç–∏–ø–∞ (–º–æ–¥—É–ª—å/—É—Ä–æ–∫), –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —à–∞–≥–∏ |
| `src/pages/Knowledge.tsx` | –û—Ç–æ–±—Ä–∞–∂–∞—Ç—å —É—Ä–æ–∫–∏ –∏–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä-–º–æ–¥—É–ª–µ–π –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ |
| `src/hooks/useSidebarModules.ts` | –ó–∞–≥—Ä—É–∂–∞—Ç—å —É—Ä–æ–∫–∏ –∏–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä-–º–æ–¥—É–ª–µ–π |
| –ú–∏–≥—Ä–∞—Ü–∏—è –ë–î | –î–æ–±–∞–≤–∏—Ç—å `is_container` –≤ `training_modules` |

## –ù–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### ContentTypeSelector.tsx

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –≤—ã–±–æ—Ä–∞ –º–µ–∂–¥—É "–ú–æ–¥—É–ª—å" –∏ "–£—Ä–æ–∫":

```tsx
interface ContentTypeSelectorProps {
  value: "module" | "lesson";
  onChange: (value: "module" | "lesson") => void;
}
```

### LessonCard.tsx

–ö–∞—Ä—Ç–æ—á–∫–∞ —É—Ä–æ–∫–∞ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ —Å–µ–∫—Ü–∏–∏ (–∫–∞–∫ "–í—ã–ø—É—Å–∫ #42"):

```tsx
interface LessonCardProps {
  lesson: TrainingLesson;
  moduleSlug: string;
}
```

## –õ–æ–≥–∏–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è —É—Ä–æ–∫–∞ –±–µ–∑ –º–æ–¥—É–ª—è

```typescript
async function getOrCreateContainerModule(sectionKey: string): Promise<string> {
  // 1. –ù–∞–π—Ç–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
  const { data: existing } = await supabase
    .from("training_modules")
    .select("id")
    .eq("menu_section_key", sectionKey)
    .eq("is_container", true)
    .single();
  
  if (existing) return existing.id;
  
  // 2. –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
  const { data: newModule } = await supabase
    .from("training_modules")
    .insert({
      title: `–£—Ä–æ–∫–∏: ${sectionKey}`,
      slug: `container-${sectionKey}`,
      menu_section_key: sectionKey,
      is_container: true,
      is_active: true,
      display_layout: "standalone-lessons",
    })
    .select()
    .single();
  
  return newModule.id;
}
```

## –†–µ–∑—É–ª—å—Ç–∞—Ç

1. **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞—Ç—å —É—Ä–æ–∫ –Ω–∞–ø—Ä—è–º—É—é** ‚Äî –±–µ–∑ —è–≤–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è –º–æ–¥—É–ª—è
2. **–£—Ä–æ–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏** ‚Äî –∫–∞–∫ "–í—ã–ø—É—Å–∫ #42" –Ω–∞ —Å–∫—Ä–∏–Ω—à–æ—Ç–µ
3. **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** ‚Äî —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –º–æ–¥—É–ª–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–∞–∫ —Ä–∞–Ω—å—à–µ
4. **–ì–∏–±–∫–æ—Å—Ç—å** ‚Äî –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏ –º–æ–¥—É–ª–∏ —Å —É—Ä–æ–∫–∞–º–∏, –∏ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —É—Ä–æ–∫–∏

## –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –ø–æ–¥—Ö–æ–¥ (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ë–î)

–ï—Å–ª–∏ –Ω–µ —Ö–æ—Ç–∏–º –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—É—é –∫–æ–ª–æ–Ω–∫—É, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:
- `display_layout: "standalone"` ‚Äî –∫–∞–∫ –º–∞—Ä–∫–µ—Ä –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
- `title` –Ω–∞—á–∏–Ω–∞—é—â–∏–π—Å—è —Å `[CONTAINER]` ‚Äî –Ω–æ —ç—Ç–æ –º–µ–Ω–µ–µ –Ω–∞–¥—ë–∂–Ω–æ

–†–µ–∫–æ–º–µ–Ω–¥—É—é –¥–æ–±–∞–≤–∏—Ç—å `is_container` –¥–ª—è —á–∏—Å—Ç–æ—Ç—ã –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã.
