
# План: Добавить RLS-политику для чтения прогресса администраторами

## Проблема
На странице `/admin/training-lessons/{moduleId}/progress/{lessonId}` отображается "Пока никто не начал прохождение" и все счётчики = 0, хотя в базе данных есть 10+ записей прогресса учеников.

**Причина**: Текущая RLS-политика на таблице `lesson_progress_state` разрешает чтение только собственных записей (`auth.uid() = user_id`). Администраторы не могут видеть прогресс других пользователей.

## Решение
Добавить RLS-политику, которая позволяет пользователям с ролями `admin` и `superadmin` читать все записи в таблице `lesson_progress_state`.

## SQL миграция

```sql
CREATE POLICY "Admins can read all progress state"
ON public.lesson_progress_state
FOR SELECT
USING (
  EXISTS (
    SELECT 1 FROM public.user_roles
    WHERE user_roles.user_id = auth.uid()
    AND user_roles.role IN ('admin', 'superadmin')
  )
);
```

## Затрагиваемые файлы
Только изменение на уровне базы данных (добавление RLS-политики). Код страницы `AdminLessonProgress.tsx` корректен и не требует изменений.

## Ожидаемый результат
- Администраторы видят все записи прогресса учеников
- Счётчики "Всего учеников", "Завершили", "Точка А", "Точка B" показывают реальные данные
- Таблица "Список учеников" отображает всех учеников с их прогрессом
- Обычные пользователи по-прежнему видят только свой прогресс

## Проверка (DoD)
1. Зайти под админом на `/admin/training-lessons/{moduleId}/progress/{lessonId}`
2. Убедиться, что счётчики показывают реальные данные (не 0)
3. Убедиться, что таблица учеников отображает записи
